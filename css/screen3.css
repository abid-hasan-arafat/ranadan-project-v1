/* ══════════════════════════════════════════════════════
   SCREEN 3 — DESCENT
══════════════════════════════════════════════════════ */
#s3 .sky {
  position:absolute; inset:0;
  background:radial-gradient(ellipse at 50% 0%,#0e1e5c 0%,#080f2e 28%,#040818 58%,#010208 100%);
}
#s3 #s3Stars { position:absolute; inset:0; width:100%; height:100%; }

/* ZOOM WRAP */
#s3 .zoomWrap {
  position:absolute; inset:-10%;
  transform-origin:50% 42%;
}
#s3.active .zoomWrap {
  animation:grandZoom 8s cubic-bezier(.16,1,.3,1) .5s forwards;
}
@keyframes grandZoom {
  0%  { transform:scale(1)   translateY(0%); }
  100%{ transform:scale(3.2) translateY(12%); }
}

#s3 .moon-wrap { position:absolute; top:7%; left:50%; transform:translateX(-50%); }
#s3 .crescent { position:relative; width:88px; height:88px; }
#s3 .crescent .mf {
  position:absolute; inset:0; border-radius:50%;
  background:radial-gradient(circle at 36% 33%,#fffbe8 0%,#f5dfa0 28%,#e8c97a 58%,#b8860b 100%);
  box-shadow:0 0 45px rgba(232,201,122,.9),0 0 110px rgba(232,201,122,.4),0 0 220px rgba(200,150,40,.2);
  animation:mp 3.5s ease-in-out infinite;
}
#s3 .crescent .mb { position:absolute; border-radius:50%; width:72px; height:72px; top:5px; left:18px; background:#040818; }
@keyframes mp {
  0%,100%{box-shadow:0 0 45px rgba(232,201,122,.9),0 0 110px rgba(232,201,122,.4)}
  50%    {box-shadow:0 0 65px rgba(232,201,122,1),0 0 160px rgba(232,201,122,.55)}
}
#s3 .moon-halo { position:absolute; width:200px; height:200px; top:50%; left:50%; transform:translate(-50%,-50%); border-radius:50%; background:radial-gradient(circle,rgba(232,201,122,.065) 0%,transparent 70%); animation:mp 3.5s ease-in-out infinite; }
#s3 .atmo {
  position:absolute; inset:0;
  background:linear-gradient(to bottom,transparent 0%,transparent 38%,rgba(8,18,50,.25) 55%,rgba(10,22,40,.65) 72%,rgba(6,12,24,.9) 85%,rgba(3,7,15,1) 100%);
}
#s3 .city  { position:absolute; bottom:0; left:-6%; right:-6%; height:50%; }
#s3 .city svg { width:100%; height:100%; display:block; }
#s3 .rooftop { position:absolute; bottom:0; left:0; right:0; height:40%; opacity:0; }
#s3 .rooftop svg { width:100%; height:100%; display:block; }
#s3.active .rooftop { animation:rfade 2.5s ease 6.2s forwards; }
@keyframes rfade { to{ opacity:1; } }
#s3 .lanternLayer { position:absolute; bottom:36%; left:0; right:0; height:18%; opacity:0; pointer-events:none; }
#s3.active .lanternLayer { animation:rfade 2.8s ease 6.5s forwards; }
#s3 .haze {
  position:absolute; inset:0;
  background:radial-gradient(ellipse at 50% 80%,rgba(30,55,80,.38) 0%,rgba(15,30,50,.18) 40%,transparent 70%);
  mix-blend-mode:screen; pointer-events:none;
}
#s3 .vignette { position:absolute; inset:0; background:radial-gradient(ellipse at 50% 50%,transparent 38%,rgba(0,0,0,.28) 65%,rgba(0,0,0,.72) 100%); pointer-events:none; }

/* letterbox */
#s3 .barT,#s3 .barB {
  position:absolute; left:0; right:0; background:#000; z-index:30;
  transition:height 2s cubic-bezier(.76,0,.24,1);
}
#s3 .barT { top:0; height:10%; }
#s3 .barB { bottom:0; height:10%; }
#s3.active .barT, #s3.active .barB { animation:barsOpen 2s cubic-bezier(.76,0,.24,1) 7.8s forwards; }
@keyframes barsOpen { to { height:0; } }

/* s3 title overlay */
#s3 .titleBlock {
  position:absolute; inset:0; z-index:20; pointer-events:none;
  display:flex; flex-direction:column; align-items:center; justify-content:center; gap:.65rem;
}
#s3 .titleBlock > * { opacity:0; }
#s3.active .tAr  { animation:tshow 1.8s ease 1.8s forwards, thide 1s ease 5.3s forwards; }
#s3.active .tEn  { animation:tshow 2s   ease 2.1s forwards, thide 1s ease 5.3s forwards; }
#s3.active .tSub { animation:tshow 2s   ease 2.5s forwards, thide 1s ease 5.3s forwards; }
@keyframes tshow { from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)} }
@keyframes thide { from{opacity:1} to{opacity:0} }
.tAr  { font-family:'Amiri',serif; font-size:clamp(1rem,3vw,1.6rem); color:rgba(232,201,122,.88); letter-spacing:.18em; }
.tEn  { font-family:'Cormorant Garamond',serif; font-size:clamp(2.2rem,6vw,5rem); font-weight:300; font-style:italic; color:rgba(245,223,160,.95); letter-spacing:.06em; }
.tSub { font-family:'Cormorant Garamond',serif; font-size:clamp(.6rem,1.8vw,.85rem); letter-spacing:.42em; text-transform:uppercase; color:rgba(200,180,130,.58); }

/* arrival + enter on s3 */
#s3 .arrival { position:absolute; bottom:clamp(6rem,14vh,10rem); left:0; right:0; z-index:20; pointer-events:none; display:flex; flex-direction:column; align-items:center; gap:.5rem; opacity:0; }
#s3.active .arrival { animation:tshow 2s ease 8s forwards; }
.arSub { font-family:'Cormorant Garamond',serif; font-size:clamp(.6rem,1.5vw,.75rem); letter-spacing:.4em; text-transform:uppercase; color:rgba(200,180,130,.48); }
.arMain { font-family:'Amiri',serif; font-size:clamp(1.1rem,3vw,1.9rem); color:rgba(232,201,122,.9); letter-spacing:.1em; }
#s3 .enterWrap { position:absolute; bottom:clamp(2rem,5vh,4rem); left:50%; transform:translateX(-50%); z-index:30; opacity:0; }
#s3.active .enterWrap { animation:tshow 2s ease 9s forwards; }
