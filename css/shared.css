/* ═══════════════════════════════════════════
   RESET & BASE
═══════════════════════════════════════════ */
*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
html, body { width:100%; height:100%; overflow:hidden; background:#000; cursor:none; }

/* ═══════════════════════════════════════════
   CUSTOM CURSOR
═══════════════════════════════════════════ */
#cursor {
  position:fixed; width:8px; height:8px;
  background:rgba(232,201,122,.88); border-radius:50%;
  pointer-events:none; z-index:9999;
  transform:translate(-50%,-50%);
  box-shadow:0 0 12px rgba(232,201,122,.75);
  transition:transform .1s, width .3s, height .3s;
}
#cursorRing {
  position:fixed; width:28px; height:28px;
  border:1px solid rgba(232,201,122,.32); border-radius:50%;
  pointer-events:none; z-index:9998;
  transform:translate(-50%,-50%);
  transition:width .3s, height .3s;
}

/* ═══════════════════════════════════════════
   FILM GRAIN
═══════════════════════════════════════════ */
#grain {
  position:fixed; inset:0; width:100%; height:100%;
  pointer-events:none; z-index:8000; opacity:.028;
}

/* ═══════════════════════════════════════════
   TRANSITION OVERLAY
═══════════════════════════════════════════ */
#transOverlay {
  position:fixed; inset:0; background:#000;
  z-index:7000; pointer-events:none; opacity:0;
  transition:opacity .9s ease;
}
#transOverlay.on { opacity:1; pointer-events:all; }

/* ═══════════════════════════════════════════
   SCREEN SYSTEM
═══════════════════════════════════════════ */
.screen {
  position:fixed; inset:0;
  opacity:0; pointer-events:none;
  transition:opacity .5s ease;
}
.screen.active {
  opacity:1; pointer-events:all;
}

/* ═══════════════════════════════════════════
   SHARED BUTTONS
═══════════════════════════════════════════ */
.glowBtn {
  font-family:'Cormorant Garamond',serif; font-size:clamp(.85rem,2vw,1rem);
  letter-spacing:.3em; text-transform:uppercase;
  color:rgba(232,201,122,.85); background:transparent;
  border:1px solid rgba(232,201,122,.3); padding:.9rem 2.5rem;
  border-radius:999px; cursor:pointer; position:relative; overflow:hidden;
  transition:color .4s, border-color .4s, box-shadow .4s, transform .2s;
}
.glowBtn::before {
  content:''; position:absolute; top:50%; left:50%;
  width:0; height:0; background:rgba(232,201,122,.08); border-radius:50%;
  transform:translate(-50%,-50%); transition:width .6s, height .6s;
}
.glowBtn:hover { color:#fff9e6; border-color:rgba(232,201,122,.65); box-shadow:0 0 30px rgba(232,201,122,.15); transform:translateY(-2px); }
.glowBtn:hover::before { width:300px; height:300px; }
.glowBtn:active { transform:translateY(0) scale(.98); }
.glowBtn::after {
  content:''; position:absolute; inset:-6px; border-radius:999px;
  border:1px solid rgba(232,201,122,.1); animation:ringPulse 2.5s ease-in-out infinite;
}
@keyframes ringPulse { 0%,100%{transform:scale(1);opacity:.5} 50%{transform:scale(1.07);opacity:0} }

/* ═══════════════════════════════════════════
   SHARED CRESCENT / MOON ELEMENTS
═══════════════════════════════════════════ */
.mstar { position:absolute; border-radius:50%; background:#fff9e6; box-shadow:0 0 5px rgba(255,249,230,.9); animation:twinkle 3s ease-in-out infinite; }
@keyframes twinkle { 0%,100%{opacity:.35;transform:scale(1)} 50%{opacity:1;transform:scale(1.35)} }

/* ═══════════════════════════════════════════
   LANTERN KEYFRAME
═══════════════════════════════════════════ */
@keyframes lanternSway{0%,100%{transform:rotate(-4deg)}50%{transform:rotate(4deg)}}

/* ═══════════════════════════════════════════
   TOKEN MODAL
═══════════════════════════════════════════ */
#tokenModal {
  position:fixed; inset:0; z-index:6500;
  display:flex; align-items:center; justify-content:center;
  background:radial-gradient(ellipse at 50% 30%, rgba(10,16,50,.97) 0%, rgba(2,4,14,.99) 100%);
  opacity:0; pointer-events:none;
  transition:opacity .65s ease;
}
#tokenModal.show { opacity:1; pointer-events:all; }
#tokenModal #tokenStars { position:absolute; inset:0; width:100%; height:100%; pointer-events:none; }

/* modal box */
.tm-box {
  position:relative; z-index:2;
  width:min(440px, 92vw);
  background:linear-gradient(150deg, #0c1228 0%, #090e1e 45%, #060a18 100%);
  border:1px solid rgba(232,201,122,.22);
  border-radius:12px;
  padding:clamp(2rem,6vw,3rem) clamp(1.4rem,5vw,2.4rem);
  box-shadow:
    0 0 0 1px rgba(232,201,122,.06),
    0 40px 100px rgba(0,0,0,.9),
    inset 0 0 80px rgba(10,15,40,.4),
    0 0 80px rgba(232,201,122,.04);
  /* entrance animation */
  transform:translateY(28px) scale(.96);
  opacity:0;
  transition:transform .7s cubic-bezier(.16,1,.3,1), opacity .6s ease;
}
#tokenModal.show .tm-box {
  transform:translateY(0) scale(1);
  opacity:1;
  transition-delay:.12s;
}

/* corner accents */
.tm-corner { position:absolute; width:20px; height:20px; border-color:rgba(232,201,122,.38); border-style:solid; }
.tm-c-tl { top:10px; left:10px;  border-width:1px 0 0 1px; }
.tm-c-tr { top:10px; right:10px; border-width:1px 1px 0 0; }
.tm-c-bl { bottom:10px; left:10px;  border-width:0 0 1px 1px; }
.tm-c-br { bottom:10px; right:10px; border-width:0 1px 1px 0; }

/* inner glow border */
.tm-box::before {
  content:''; position:absolute; inset:14px;
  border:1px solid rgba(232,201,122,.06); border-radius:6px; pointer-events:none;
}

/* moon */
.tm-moon {
  text-align:center; font-size:2rem; margin-bottom:.6rem;
  filter:drop-shadow(0 0 14px rgba(232,201,122,.8));
  animation:tmMoonPulse 3.5s ease-in-out infinite;
}
@keyframes tmMoonPulse {
  0%,100%{ filter:drop-shadow(0 0 12px rgba(232,201,122,.6)); }
  50%    { filter:drop-shadow(0 0 26px rgba(232,201,122,1)); }
}

/* text */
.tm-label {
  font-family:'Amiri',serif; font-size:.8rem; letter-spacing:.3em;
  text-align:center; color:rgba(232,201,122,.45);
  margin-bottom:.4rem;
}
.tm-title {
  font-family:'Cormorant Garamond',serif; font-weight:300;
  font-size:clamp(1.4rem,4vw,2rem); letter-spacing:.06em;
  color:rgba(245,223,160,.95); text-align:center; margin-bottom:.5rem;
  text-shadow:0 0 30px rgba(232,201,122,.2);
}
.tm-sub {
  font-family:'Cormorant Garamond',serif; font-style:italic;
  font-size:clamp(.78rem,2vw,.92rem); color:rgba(200,185,155,.52);
  text-align:center; line-height:1.7; margin-bottom:1.2rem;
}
.tm-divider {
  width:60%; height:1px; margin:.2rem auto 1.4rem;
  background:linear-gradient(to right, transparent, rgba(232,201,122,.28), transparent);
}

/* input row */
.tm-input-wrap {
  display:flex; gap:.6rem; align-items:stretch;
  margin-bottom:.7rem;
}
.tm-input {
  flex:1;
  background:rgba(6,10,28,.8);
  border:1px solid rgba(232,201,122,.22);
  border-radius:8px;
  padding:.75rem 1.1rem;
  font-family:'Space Mono',monospace;
  font-size:clamp(.9rem,2.5vw,1.05rem);
  letter-spacing:.28em;
  color:rgba(232,201,122,.92);
  text-align:center;
  outline:none;
  caret-color:rgba(232,201,122,.7);
  transition:border-color .3s, box-shadow .3s;
}
.tm-input::placeholder {
  letter-spacing:.5em; color:rgba(180,165,130,.2);
}
.tm-input:focus {
  border-color:rgba(232,201,122,.5);
  box-shadow:0 0 0 3px rgba(232,201,122,.06), inset 0 0 20px rgba(232,201,122,.03);
}
/* shake on wrong */
.tm-input.wrong {
  border-color:rgba(220,80,80,.6);
  box-shadow:0 0 0 3px rgba(220,80,80,.08);
  animation:tmShake .4s ease;
}
@keyframes tmShake {
  0%,100%{ transform:translateX(0); }
  20%    { transform:translateX(-7px); }
  40%    { transform:translateX(7px); }
  60%    { transform:translateX(-5px); }
  80%    { transform:translateX(4px); }
}

.tm-submit {
  width:48px; flex-shrink:0;
  background:rgba(232,201,122,.1);
  border:1px solid rgba(232,201,122,.3);
  border-radius:8px;
  color:rgba(232,201,122,.85);
  font-size:1.2rem;
  cursor:pointer;
  transition:background .3s, border-color .3s, box-shadow .3s, transform .15s;
  display:flex; align-items:center; justify-content:center;
}
.tm-submit:hover {
  background:rgba(232,201,122,.18);
  border-color:rgba(232,201,122,.6);
  box-shadow:0 0 20px rgba(232,201,122,.1);
  transform:translateY(-1px);
}
.tm-submit:active { transform:translateY(1px) scale(.97); }

/* status messages */
.tm-status {
  min-height:1.6rem;
  font-family:'Cormorant Garamond',serif; font-style:italic;
  font-size:clamp(.78rem,2vw,.9rem); text-align:center;
  letter-spacing:.06em; line-height:1.5;
  transition:opacity .35s, color .35s;
  margin-bottom:.3rem;
}
.tm-status.ok    { color:rgba(100,220,150,.9); }
.tm-status.err   { color:rgba(220,100,100,.85); }
.tm-status.empty { color:transparent; }

.tm-hint {
  font-family:'Space Mono',monospace; font-size:.48rem;
  letter-spacing:.18em; text-transform:uppercase;
  color:rgba(180,165,130,.22); text-align:center;
  margin-top:.5rem;
}

/* SUCCESS state — box pulses gold */
.tm-box.success {
  border-color:rgba(232,201,122,.55);
  box-shadow:
    0 0 0 1px rgba(232,201,122,.18),
    0 40px 100px rgba(0,0,0,.9),
    0 0 80px rgba(232,201,122,.12);
  animation:tmSuccessPulse .6s ease;
}
@keyframes tmSuccessPulse {
  0%  { box-shadow:0 0 0 1px rgba(232,201,122,.18),0 0 60px rgba(232,201,122,.25); }
  50% { box-shadow:0 0 0 2px rgba(232,201,122,.45),0 0 120px rgba(232,201,122,.4); }
  100%{ box-shadow:0 0 0 1px rgba(232,201,122,.18),0 0 80px rgba(232,201,122,.12); }
}
